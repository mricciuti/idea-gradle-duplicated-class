// Plugins 
plugins {
    id "java"
  //  id "idea"
}

// Java configuration
sourceCompatibility = "1.8"
[compileJava, compileTestJava, javadoc]*.options*.encoding = "UTF-8"

// Dependencies
repositories {
    jcenter()
}
ext {

    // path to Gradle generated main sources directory
    gradleGeneratedMainSourcesDir = "$buildDir/generated/sources/annotationProcessor/java/main/"
    // path to Gradle generated test sources directory
    gradleGeneratedTestSourcesDir = "$buildDir/generated/sources/annotationProcessor/java/test/"
    // path to IDEA generated sources directory
    ideaGeneratedSourcesDir = "$projectDir/out/production/classes/generated"

    // Deps versions
    lombokVersion = "1.18.6"
    mapstructVersion = "1.2.0.Final"
}

dependencies {
    /* -------------- Lombok -----------------------------------------------------*/
    compileOnly "org.projectlombok:lombok:${lombokVersion}"
    annotationProcessor "org.projectlombok:lombok:${lombokVersion}"
 
    /* ------------ Mapstruct ----------------------------------------------------*/
    compileOnly("org.mapstruct:mapstruct-jdk8:${mapstructVersion}")
    annotationProcessor "org.mapstruct:mapstruct-processor:${mapstructVersion}"

}

// IDEA plugin configuration (for sources dirs setup)
/* 
idea {
    module {
        // exclude main & test sources generated by Gradle from project source directories
        //excludeDirs += file(gradleGeneratedMainSourcesDir)
        //excludeDirs += file(gradleGeneratedTestSourcesDir)

        // include generated sources directory managed by IDEA
        //sourceDirs += file(ideaGeneratedSourcesDir)
        //generatedSourceDirs += file(ideaGeneratedSourcesDir)
    }
}
*/
compileJava {    
    options.annotationProcessorPath = configurations.annotationProcessor
}
